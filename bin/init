#!/bin/bash -e

# Install gems
bundle install

# Install packages
yarn

# Create & run Docker images
if [[ -z "$AVO_DISABLE_DOCKER" ]]; then
  docker volume create --name=avo-db-data
  docker-compose up -d
fi;

# Create & migrate the database
rails db:create
rails db:migrate

# Stop Docker images
if [[ -z "$AVO_DISABLE_DOCKER" ]]; then
  docker-compose stop
fi;