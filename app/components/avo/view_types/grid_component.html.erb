<turbo-frame id="<%= @resource.model_key %>_list" target="_top" class="relative flex w-full flex-col">
  <%= content_tag :div,
    class:"w-full grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6 gap-6 mt-8",
    data: {
      component_name: self.class.to_s.underscore,
      selected_resources_name: @resource.model_key,
      selected_resources: [],
      **(try(:drag_reorder_data_attributes) || {})
    } do %>
    <% @resources.each_with_index do |resource, index| %>
      <% cache_if Avo.configuration.cache_resources_on_index_view, resource.cache_hash(@parent_record) do %>
        <% card = grid_card_for(resource) %>
        <%= content_tag :div, class: "w-full h-full flex flex-col" do %>
          <%= render resource.resolve_component(Avo::UI::GridItemComponent).new(
            image: card[:cover_url],
            title: card[:title],
            description: card[:body],
            badge_label: card.dig(:badge, :label),
            badge_color: card.dig(:badge, :color),
            checkbox_checked: false,
            actions: render(Avo::Index::ResourceControlsComponent.new(
              resource: resource,
              reflection: @reflection,
              parent_record: @parent_record,
              parent_resource: @parent_resource,
              view_type: :grid,
              actions: actions,
              layout: :dropdown
            )),
            record_id: resource.record_param,
            resource_model_key: resource.model_key
          ) %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>

  <div class="mt-6"><%= render paginator_component %></div>
</turbo-frame>
