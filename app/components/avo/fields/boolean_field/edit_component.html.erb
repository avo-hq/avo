<%= field_wrapper(**field_wrapper_args) do %>
  <div class="h-8 flex items-center">
    <% if as_toggle? %>
      <%# Stimulus controller wrapper %>
      <div data-controller="avo-boolean-toggle">
        <%= @form.check_box @field.id, **common_checkbox_attributes %>

        <%# toggle switch %>
        <label for="<%= common_checkbox_attributes[:id] %>"
          class="relative inline-flex items-center cursor-pointer <%= 'cursor-not-allowed opacity-50' if disabled? %>">
          <%# toggle track %>
          <div class="relative w-11 h-6 rounded-full transition-colors duration-200 <%= @field.value ? 'bg-blue-500' : 'bg-gray-300' %>"
               data-avo-boolean-toggle-target="track">
            <%# toggle circle %>
            <div class="absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform duration-200 shadow-sm transform <%= @field.value ? 'translate-x-5' : 'translate-x-0' %>"
                 data-avo-boolean-toggle-target="circle"></div>
          </div>
        </label>
      </div>
    <% else %>
      <%= @form.check_box @field.id, **common_checkbox_attributes %>
    <% end %>
  </div>
<% end %>
