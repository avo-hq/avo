/* Text Input Component - Based on Figma Design System */
/* BEM Methodology: .input (block), .input-field (element), .input--modifier (modifier) */

/* Replaced input heights (range, color): content + padding + border */
:root {
  --input-height-sm: calc(1rem + 0.5rem + 2px);
  --input-height-md: calc(1.25rem + 0.75rem + 2px);
  --input-height-lg: calc(1.25rem + 1.25rem + 2px);
}

/* ==========================================================================
  Base Styles
  ========================================================================== */
select,
textarea,
input {
  @apply appearance-none inline-flex self-stretch bg-primary text-content rounded-lg border border-tertiary px-2 font-normal overflow-hidden text-ellipsis whitespace-nowrap relative py-1.5 text-sm leading-5 w-full;

  box-shadow: var(--box-shadow);
}

/* ==========================================================================
  Size Variants
  ========================================================================== */

/* Small */
.input--size-sm,
.input--size-sm::placeholder {
  @apply py-1 text-xs leading-4;
}

/* Medium (default) */
.input--size-md,
.input--size-md::placeholder {
  @apply py-1.5 text-sm leading-5;
}

/* Large */
.input--size-lg,
.input--size-lg::placeholder {
  @apply py-2.5 text-sm leading-5;
}

/* Range & Color: match total height of text inputs (replaced elements) */
input[type="range"],
input[type="color"] {
  height: var(--input-height-md);
}

input[type="range"].input--size-sm,
input[type="color"].input--size-sm {
  height: var(--input-height-sm);
}

input[type="range"].input--size-md,
input[type="color"].input--size-md {
  height: var(--input-height-md);
}

input[type="range"].input--size-lg,
input[type="color"].input--size-lg {
  height: var(--input-height-lg);
}

input[type="range"],
input[type="color"] {
  cursor: pointer;
}

/* ==========================================================================
  Placeholder (fallback for inputs without size modifier)
  ========================================================================== */
select::placeholder,
textarea::placeholder,
input::placeholder {
  @apply font-normal text-content-secondary overflow-hidden text-ellipsis whitespace-nowrap;
}

/* ==========================================================================
  State: Hover
  ========================================================================== */
select:hover:not(:disabled),
textarea:hover:not(:disabled),
input:hover:not(:disabled) {
  @apply bg-secondary;
}

/* ==========================================================================
  State: Focus
  ========================================================================== */
select::focus,
textarea::focus,
input:focus {
  @apply outline-none;

  box-shadow: none;
}

select:focus-visible,
textarea:focus-visible,
input:focus-visible {
  @apply outline-none;
  box-shadow: var(--box-shadow-focus);
}

/* ==========================================================================
  State: Active
  ========================================================================== */
select:active:not(:disabled),
textarea:active:not(:disabled),
input:active:not(:disabled) {
  box-shadow: var(--box-shadow-active);
}

/* ==========================================================================
  State: Disabled
  ========================================================================== */

select:disabled,
textarea:disabled,
input:disabled {
  @apply cursor-not-allowed opacity-60 mix-blend-luminosity;
}

select:disabled:hover,
textarea:disabled:hover,
input:disabled:hover {
  @apply bg-primary;
}

/* ==========================================================================
  State: Error
  ========================================================================== */

.input-field--error {
  @apply text-danger-content;

  box-shadow: var(--box-shadow-error);
}

.input-field--error:focus-visible {
  @apply text-content;
}

.input-field--error::placeholder {
  @apply text-danger-content;
}

/* ==========================================================================
  State: Success
  ========================================================================== */

.input-field--success {
  box-shadow: var(--box-shadow-success);
}

/* ==========================================================================
  State: Loading
  ========================================================================== */

@keyframes input-spinner-rotation {
  from {
    transform: translateY(-50%) rotate(0deg);
  }
  to {
    transform: translateY(-50%) rotate(360deg);
  }
}


/* ==========================================================================
  State: Password Visibility
  ========================================================================== */
/* password visibility button */
.input-field__password-toggle {
  @apply absolute text-content-secondary inset-y-0 end-0 pe-2 flex items-center cursor-pointer;
}

/* Password inputs need padding for the toggle button */
input:has(~ .input-field__password-toggle) {
  @apply pe-7;
}

/* ==========================================================================
  State: Icon Size
  ========================================================================== */

/* Small size */
.input--size-sm ~ .input-field__password-toggle svg {
  @apply size-3.5;
}

/* Medium size */
input ~ .input-field__password-toggle svg ,
.input--size-md ~ .input-field__password-toggle svg {
  @apply size-4;
}

/* Large size */
.input--size-lg ~ .input-field__password-toggle svg {
  @apply size-4.5;
}


/* ==========================================================================
  State: Password Icon Disabled
  ========================================================================== */

input:disabled ~ .input-field__password-toggle {
  @apply pointer-events-none opacity-60 cursor-not-allowed;
}

/* ==========================================================================
  State: Password Icon Disabled and Loading
  ========================================================================== */

/* Move the toggle button left when loading spinner is present */
.input-wrapper--loading .input-field__password-toggle {
  @apply end-5;
}

/* Password input with loading spinner needs extra padding for both icons */
.input-wrapper--loading:has(.input-field__password-toggle) input {
  @apply pe-11;
}

/* ==========================================================================
   Date Input: Hide native icon & add custom icon
   ========================================================================== */

/* Step 1: Make the native indicator cover the custom icon area */
input[type="date"]::-webkit-calendar-picker-indicator {
  opacity: 0;
  position: absolute;
  right: 0;
  top: 0;
  width: 40px;
  height: 100%;
  cursor: pointer;
}

/* Step 2: Ensure the input is positioned for the absolute indicator */
input[type="date"] {
  @apply bg-no-repeat relative;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath stroke='none' d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12'/%3E%3Cpath d='M16 3v4'/%3E%3Cpath d='M8 3v4'/%3E%3Cpath d='M4 11h16'/%3E%3Cpath d='M11 15h1'/%3E%3Cpath d='M12 15v3'/%3E%3C/svg%3E");
  background-position: right 8px center;
  background-size: 16px;
}


/* date size variants */
.input--size-sm[type="date"] {
  background-size: 14px;
}

.input--size-md[type="date"] {
  background-size: 16px;
}

.input--size-lg[type="date"] {
  background-size: 18px;
}
