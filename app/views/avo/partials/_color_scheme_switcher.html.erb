<div class="color-scheme-switcher"
     data-controller="color-scheme-switcher toggle"
     data-toggle-exemption-containers-value='["[data-controller*=\"color-scheme-switcher\"]"]'>
  <button type="button"
          data-color-scheme-switcher-target="button"
          data-action="click->color-scheme-switcher#setTheme"
          data-theme="brand"
          class="color-scheme-switcher__button"
          title="Brand theme">
    <span class="color-scheme-switcher__text">Brand</span>
    <span class="sr-only">Brand</span>
  </button>
  <button type="button"
          data-color-scheme-switcher-target="button"
          data-action="click->color-scheme-switcher#setTheme"
          data-theme="slate"
          class="color-scheme-switcher__button"
          title="Slate theme">
    <span class="color-scheme-switcher__text">Slate</span>
    <span class="sr-only">Slate</span>
  </button>
  <button type="button"
          data-color-scheme-switcher-target="button"
          data-action="click->color-scheme-switcher#setTheme"
          data-theme="stone"
          class="color-scheme-switcher__button"
          title="Stone theme">
    <span class="color-scheme-switcher__text">Stone</span>
    <span class="sr-only">Stone</span>
  </button>

  <div class="color-scheme-switcher__accent-wrapper">
    <button type="button"
            data-color-scheme-switcher-target="button"
            data-action="click->toggle#togglePanel"
            class="color-scheme-switcher__button color-scheme-switcher__button--accent"
            title="Accent color">
      <%= svg "avo/color-swatch", class: "color-scheme-switcher__icon" %>
      <span class="color-scheme-switcher__accent-badge">
        <span class="color-scheme-switcher__accent-badge-preview color-scheme-switcher__accent-badge-preview--neutral"></span>
        <% %w[orange yellow green blue purple pink red teal].each do |accent| %>
          <span class="color-scheme-switcher__accent-badge-preview color-scheme-switcher__accent-badge-preview--<%= accent %> bg-<%= accent %>-500"></span>
        <% end %>
      </span>
      <span class="sr-only">Accent color</span>
    </button>

    <div class="color-scheme-switcher__accent-panel"
         hidden
         data-toggle-target="panel"
         data-color-scheme-switcher-target="accentPanel">
      <div class="color-scheme-switcher__accent-options">
        <% %w[neutral orange yellow green blue purple pink red teal].each do |accent| %>
          <%
            preview_class = if accent == "neutral"
              "color-scheme-switcher__accent-preview color-scheme-switcher__accent-preview--neutral"
            else
              "color-scheme-switcher__accent-preview bg-#{accent}-500"
            end
          %>
          <button type="button"
                  data-action="click->color-scheme-switcher#setAccent"
                  data-accent="<%= accent %>"
                  data-tippy="tooltip"
                  title="<%= accent.capitalize %>"
                  class="color-scheme-switcher__accent-option">
            <span class="<%= preview_class %>"></span>
            <span class="sr-only"><%= accent.capitalize %></span>
          </button>
        <% end %>
      </div>
    </div>
  </div>

  <button type="button"
          data-color-scheme-switcher-target="button"
          data-action="click->color-scheme-switcher#setScheme"
          data-scheme="auto"
          class="color-scheme-switcher__button"
          title="Auto (system preference)">
    <%= svg "heroicons/outline/computer-desktop", class: "color-scheme-switcher__icon" %>
    <span class="sr-only">Auto</span>
  </button>
  <button type="button"
          data-color-scheme-switcher-target="button"
          data-action="click->color-scheme-switcher#setScheme"
          data-scheme="light"
          class="color-scheme-switcher__button"
          title="Light mode">
    <%= svg "heroicons/outline/sun", class: "color-scheme-switcher__icon" %>
    <span class="sr-only">Light</span>
  </button>
  <button type="button"
          data-color-scheme-switcher-target="button"
          data-action="click->color-scheme-switcher#setScheme"
          data-scheme="dark"
          class="color-scheme-switcher__button"
          title="Dark mode">
    <%= svg "heroicons/outline/moon", class: "color-scheme-switcher__icon" %>
    <span class="sr-only">Dark</span>
  </button>
</div>
