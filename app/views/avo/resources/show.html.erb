<div data-model-id="<%= @model.id %>">
  <% @avo_resource.panels.each do |resource_panel| %>
    <%= panel do %>
      <% content_for :heading do %>
        <%= resource_panel[:name] %>
      <% end %>

      <% content_for :tools do %>
        <div class="flex justify-end space-x-2">
          <% back_path = params[:via_resource_name].present? ? resource_path(to_resource_name: params[:via_resource_name], to_resource_id: params[:via_resource_id], keep_query_params: false) : resources_path(@model.class) %>
          <%= a_link back_path do %>
            <%= svg 'media/svgs/arrow-left.svg' %> <%= t('avo.go_back') %>
          <% end %>
          <%= a_link resource_path(@model), color: 'red', variant: 'outlined', method: :delete, data: {confirm: 'Are you sure?'} do %>
            <%= svg 'media/svgs/trash.svg' %> <%= t('avo.delete').capitalize %>
          <% end if @authorization.set_record(@model).authorize_action :destroy, raise_exception: false %>
          <%= a_link edit_resource_path(@model), color: 'indigo' do %>
            <%= svg 'media/svgs/edit.svg' %> <%= t('avo.edit').capitalize %>
          <% end if @authorization.set_record(@model).authorize_action :edit, raise_exception: false %>
        </div>
      <% end %>

      <% @resource.get_fields.each_with_index do |field, index| %>
        <%= show_field field, index, @resource %>
      <% end %>
    <% end %>

    <div>
      <%#= has many panel %>
    </div>
  </div>
<% end %>
